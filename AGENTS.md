# AGENTS.md

すべての AI コーディングエージェント（GitHub Copilot、Claude Code、Cursor、Cline など）向けの開発哲学とワークフロー。

## 開発哲学

このプロジェクトは以下の原則に基づいて開発します:

- **計画駆動開発（PDD）**: 実装前に計画を立て、実装中に学びを記録する
- **ドキュメントファースト**: コードと同等にドキュメントを重視する
- **明確な履歴**: Conventional Commits で変更の意図を明確にする
- **継続的な改善**: ADR で設計判断を記録し、将来の判断材料とする

## コミット規約とブランチ命名

Conventional Commits を採用する理由:

- 変更の種類を一目で理解できる
- CHANGELOG の自動生成が可能
- セマンティックバージョニングの自動化

| type       | 用途                                               | なぜ使うか                           |
| ---------- | -------------------------------------------------- | ------------------------------------ |
| `feat`     | 新機能                                             | ユーザー価値の追加を明示             |
| `fix`      | バグ修正                                           | 問題解決を明示、パッチバージョン更新 |
| `docs`     | ドキュメントのみ                                   | コード変更なしを保証                 |
| `style`    | コードの意味に影響しない変更（空白、フォーマット） | 機能変更なしを保証                   |
| `refactor` | バグ修正でも新機能でもないコード変更               | 内部改善を明示                       |
| `test`     | テストの追加・修正                                 | テストカバレッジ向上を明示           |
| `chore`    | ビルドプロセスやツールの変更                       | 開発環境の改善を明示                 |

ブランチ名: `{type}/{description}` (例: `feat/add-tool`, `fix/error-handling`)

## ワークフロー概要 (PDD: Plan Driven Development)

### なぜ PDD か

- **失敗を早期に発見**: 実装前の計画段階で問題を特定
- **知識の蓄積**: NOTES によって学びと解決策を記録
- **レビューの効率化**: PLAN.md により実装意図が明確
- **再現性**: 将来、同様の問題に直面した際の参考資料

### ワークフローステップ

1. 機能ブランチを作成: `git switch -c {type}/{description}`
2. 計画フェーズ:
   - `.pdd/{branch}/PLAN.md` を作成
   - 機能仕様、タスク分解、技術選定を記載
   - 実装前に PLAN.md をレビュー・精査
3. 実装フェーズ:
   - PLAN.md に沿って実装
   - マイルストーンごとに `.pdd/{branch}/NOTES_%Y%m%d_%H%M%S.md` を作成
   - 発見事項、問題、解決策を記録
   - PLAN.md は必要に応じて更新
4. PR フェーズ:
   - PR 作成・レビュー対応
   - マージ後、`.pdd/{branch}/` 配下は自動削除（Git 追跡外）

## ドキュメント戦略

### 作業ドキュメント (.pdd/)

- **目的**: 計画と実装の判断を記録
- **ライフサイクル**: ブランチスコープ、Git 除外（AGENTS.md を除く）
- **作成タイミング**:
  - PLAN.md: ブランチ作成時（必須）
  - NOTES: マイルストーンごと（調査結果、実装中の発見）
- **詳細なルール**: `.pdd/AGENTS.md` を参照

### アーキテクチャ決定記録 (docs/adr/)

- **目的**: 長期的なアーキテクチャ決定の記録
- **ツール**: adr-tools CLI
- **作成タイミング**: プロジェクトの方向性に影響する重要な設計判断
- **理由**: 将来、「なぜこの設計にしたのか」を振り返るため

## ドキュメント原則

### 記述スタイル

- 事実を簡潔に記述
- 抽象的な説明より具体例を優先
- 可読性のためのリストや表は推奨

### セキュリティとプライバシー

**なぜ重要か**: Git 追跡されるドキュメントに機密情報が含まれると、永続的に残る

**禁止事項**:

- 秘密鍵、トークン、パスワード
- API キー、認証情報
- 個人を特定できる情報（名前、メール、ユーザー名）
- ローカル環境のパス

**許可される情報**:

- プロジェクト ID やリソース名
- テンプレートファイル（.env.example）への参照

**ローカル専用情報**: `AGENTS.local.md` に記載（Git 除外）

### ドキュメント構造ルール

**目的**: 一貫性と解析可能性の確保

**共通ルール**:

- 絵文字禁止（解析ツールとの互換性）
- 水平線禁止（Markdown パーサーによる解釈の違いを避ける）

**`.pdd/` 内のドキュメント構造**: `.pdd/AGENTS.md` を参照

## リリース哲学

- **自動化**: release-please による自動リリース
- **セマンティックバージョニング**: Conventional Commits から自動判定
- **透明性**: CHANGELOG は自動生成、手動編集不要

詳細なコマンドや技術スタックは `.github/copilot-instructions.md` を参照。
